<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    
    
    <title>C++基础07 | 庸的博客 | 爱代码,爱生活~</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="keywords" content>
    <link rel="shortcut icon" href="/img/yong.png">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.css">
    <link rel="stylesheet" href="/css/style.css?v=1.4.4">
    
    <script type="text/javascript">
        // Data Center
        var DC = {
            reward:	false,
            lv: JSON.parse('{"enable":false,"app_id":null,"app_key":null,"icon":true}'),
            v: JSON.parse('{"enable":false,"appid":null,"appkey":null,"notify":true,"verify":true,"placeholder":"give me some sugers plz...","avatar":"wavatar"}'),
            g: JSON.parse('{"enable":false,"lazy":true,"owner":"codefine","repo":"gitment","oauth":{"client_id":null,"client_secret":null},"perPage":10}'),
            d: JSON.parse('{"app_id":null}')
        };
    </script>
    <script type="text/javascript">
        window.lazyScripts=[];
    </script>
    
</head>


<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="">
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap">
      
      <img src="/img/brand.jpg" class="brand-bg">
      
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/yong.png">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">HSR</h5>
          <a href="mailto:461467948@qq.com" title="461467948@qq.com" class="mail">
            
              <span>4</span>
            
              <span>6</span>
            
              <span>1</span>
            
              <span>4</span>
            
              <span>6</span>
            
              <span>7</span>
            
              <span>9</span>
            
              <span>4</span>
            
              <span>8</span>
            
              <span>@</span>
            
              <span>q</span>
            
              <span>q</span>
            
              <span>.</span>
            
              <span>c</span>
            
              <span>o</span>
            
              <span>m</span>
            
          </a>
        </hgroup>
        
        <ul class="menu-link">
          
              <li>
                <a href="https://github.com/HonourShu" target="_blank">
                  <i class="icon icon-lg icon-github"></i>
                </a>
              </li>
            
        </ul>
        
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row clearfix">
        <a href="javascript:;" class="header-icon pull-left waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">
            <span>C++基础07</span>
            
        </div>
        
        <a href="javascript:;" id="site_search_btn" class="header-icon pull-right waves-effect waves-circle waves-light">
            <i class="icon icon-lg icon-search"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">
    <img src="/img/banner.jpg" class="header-bg">
    <div class="container fade-scale">
        <h1 class="title">C++基础07</h1>
        <h5 class="subtitle">
            
                <time datetime="2019-10-11T11:04:52.000Z" itemprop="datePublished" class="page-time">
  2019-10-11
</time>


            
        </h5>
        
    </div>
    

</header>

<div id="site_search">
    <div class="search-title clearfix">
        <span class="pull-left">
          <i class="icon icon-lg icon-search"></i>
        </span>
        <input type="text" id="local-search-input" name="q" results="0" placeholder="search my blog..." class="form-control pull-left"/>
        <a href="javascript:;" class="close pull-right waves-effect waves-circle waves-light">
          <i class="icon icon-lg icon-close"></i>
        </a>
    </div>
    <div id="local-search-result"></div>
</div>


<div class="container body-wrap">
    <article id="post-C-基础07"
  class="post-article article-type-post" itemprop="blogPost">
    <div class="post-card">
        <h1 class="post-card-title">C++基础07</h1>
        <div class="post-meta">
            <time class="post-time" title="2019-10-11 19:04:52" datetime="2019-10-11T11:04:52.000Z"  itemprop="datePublished">2019-10-11</time>

            


            

            


            
        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            
            <h2 id="静态联编和动态联编"><a href="#静态联编和动态联编" class="headerlink" title="静态联编和动态联编"></a><strong>静态联编和动态联编</strong></h2><p>多态分类：静态多态(函数重载)    动态多态(虚函数  继承关系)</p>
<p>静态联编：地址早绑定，编译阶段绑定好地址</p>
<p>动态联编：地址晚绑定，运行时候绑定好地址</p>
<p>多态：父类的引用或者指针指向子类对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">/* data */</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Animal(<span class="comment">/* args */</span>) &#123;&#125;</span><br><span class="line">    ~Animal() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"动物在说话"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span> <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">private</span>:</span><br><span class="line">    <span class="comment">/* data */</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Cat(<span class="comment">/* args */</span>) &#123;&#125;</span><br><span class="line">    ~Cat() &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"小猫在说话"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">//调用doSpeak，speak函数的地址早就绑定好了，早绑定，静态联编</span></span><br><span class="line"><span class="comment">//如果想调用猫的speak，不能提前绑定好函数的地址了，所以需要在运行的时候再去确定函数地址</span></span><br><span class="line"><span class="comment">//动态联编，写法  doSpeak方法改为虚函数，在父类上声明函数，发生了多态</span></span><br><span class="line"><span class="comment">//父类的引用或者指针指向子类对象</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">doSpeak</span><span class="params">(Animal &amp;animal)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    animal.speak();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//如果发生了继承的关系，编译器允许进行类型转换</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    Cat cat;</span><br><span class="line">    doSpeak(cat);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="多态原理解析"><a href="#多态原理解析" class="headerlink" title="多态原理解析"></a><strong>多态原理解析</strong></h2><p>当父类有了虚函数后、内部结构就发生改变</p>
<p>内部多了一个vfptr(virtual function pointer)虚函数表指针，指向vftable 虚函数表</p>
<p>父类中结构vfptr &amp;Animal::speak </p>
<p>子类中进行继承，会继承vfptr vftable</p>
<p>构造函数中会将虚函数表指针 指向自己的虚函数表</p>
<p>如果发生了<strong>重写</strong>，会替换掉虚函数表中的原有speak，改为 &amp;Cat::speak</p>
<p>多态成立条件：</p>
<ol>
<li><p>有继承</p>
</li>
<li><p>子类重写父类虚函数函数</p>
<p>a) 返回值、函数名字、函数参数必须和父类完全一致(析构函数除外)</p>
<p>b) 子类中 virtual关键字可写可不写，建议写</p>
</li>
<li><p>类型兼容：父类指针，父类引用指向子类对象</p>
</li>
</ol>
<h2 id="多态案例–计算器案例"><a href="#多态案例–计算器案例" class="headerlink" title="多态案例–计算器案例"></a><strong>多态案例–计算器案例</strong></h2><p>早期方法不利于扩展</p>
<p>开发有原则：开闭原则—对扩展开发，对修改关闭</p>
<p>利用多态实现 – 利用后期扩展，结构性非常好，可读性高，效率稍微低，发生多态内部结构复杂</p>
<p>如果父类中有了纯虚函数，子类继承父类时必须实现纯虚函数</p>
<p>如果父类中有了纯虚函数，这个父类就无法实例化对象<br>这个类有了纯虚函数，通常称为 抽象类</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">abstractCalculator</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setv1</span><span class="params">(<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;val1 = v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">setv2</span><span class="params">(<span class="keyword">int</span> v)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;val2 = v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//虚函数</span></span><br><span class="line">    <span class="comment">//virtual int getResult()&#123;return 0;&#125;</span></span><br><span class="line">    <span class="comment">//纯虚函数</span></span><br><span class="line">    <span class="comment">//如果父类中有了纯虚函数，子类继承父类时必须实现纯虚函数</span></span><br><span class="line">    <span class="comment">//如果父类中有了纯虚函数，这个父类就无法实例化对象</span></span><br><span class="line">    <span class="comment">//这个类有了纯虚函数，通常称为 抽象类</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getResult</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> val1;</span><br><span class="line">    <span class="keyword">int</span> val2;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlusCalculator</span>:</span> <span class="keyword">public</span> abstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 + val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubCalculator</span>:</span> <span class="keyword">public</span> abstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 - val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ChengCalculator</span>:</span> <span class="keyword">public</span> abstractCalculator</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getResult</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> val1 * val2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    abstractCalculator *abc;</span><br><span class="line">    abc = <span class="keyword">new</span> PlusCalculator;</span><br><span class="line">    abc-&gt;setv1(<span class="number">10</span>);</span><br><span class="line">    abc-&gt;setv2(<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;abc-&gt;getResult()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">delete</span> abc;</span><br><span class="line"></span><br><span class="line">    abc = <span class="keyword">new</span> SubCalculator;</span><br><span class="line">    abc-&gt;setv1(<span class="number">5</span>);</span><br><span class="line">    abc-&gt;setv2(<span class="number">8</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;abc-&gt;getResult()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> abc;</span><br><span class="line">    abc = <span class="keyword">new</span> ChengCalculator;</span><br><span class="line">    abc-&gt;setv1(<span class="number">5</span>);</span><br><span class="line">    abc-&gt;setv2(<span class="number">8</span>);</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;abc-&gt;getResult()&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="comment">//system("pause");</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="抽象类和纯虚函数"><a href="#抽象类和纯虚函数" class="headerlink" title="抽象类和纯虚函数"></a><strong>抽象类和纯虚函数</strong></h2><p>纯虚函数写法：virtuak void func() = 0;</p>
<p>如果父类中有了纯虚函数，子类继承父类时必须实现纯虚函数</p>
<p>如果父类中有了纯虚函数，这个父类就无法实例化对象<br>这个类有了纯虚函数，通常称为 抽象类</p>
<h2 id="虚析构和纯析构函数"><a href="#虚析构和纯析构函数" class="headerlink" title="虚析构和纯析构函数"></a><strong>虚析构和纯析构函数</strong></h2><p>虚析构</p>
<p>virtual ~类名(){}</p>
<p>解决问题：通过父类指针指向子类对象释放时候不干净导致的问题</p>
<p>纯虚析构</p>
<p>virtual ~类名() = 0;</p>
<p>需要声明和实现，类内声明，类外实现</p>
<p>如果函数中出现了纯虚析构函数，那么这个类也是抽象类，不可以实例化对象</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//虚析构</span></span><br><span class="line">    <span class="comment">// virtual ~Animal()</span></span><br><span class="line">    <span class="comment">// &#123;</span></span><br><span class="line">    <span class="comment">//     cout&lt;&lt;"Animal的析构调用"&lt;&lt;endl;</span></span><br><span class="line">    <span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">//纯虚析构</span></span><br><span class="line">    <span class="comment">//纯虚析构，需要声明和实现，类内声明，类外实现</span></span><br><span class="line">    <span class="comment">//如果函数中出现了纯虚析构函数，那么这个类也是抽象类</span></span><br><span class="line">    <span class="keyword">virtual</span> ~Animal() = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"动物在说话"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//纯虚析构的函数实现</span></span><br><span class="line">Animal::~Animal()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"Animal的纯虚析构调用"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Cat</span>:</span> <span class="keyword">public</span> Animal</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Cat(<span class="keyword">const</span> <span class="keyword">char</span> *name)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">this</span>-&gt;m_Name = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="built_in">strlen</span>(name)+<span class="number">1</span>];</span><br><span class="line">        <span class="built_in">strcpy</span>(<span class="keyword">this</span>-&gt;m_Name, name);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">virtual</span> ~Cat()</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"Cat的析构调用"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_Name != <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">delete</span> [] <span class="keyword">this</span>-&gt;m_Name;</span><br><span class="line">            <span class="keyword">this</span>-&gt;m_Name = <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">speak</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"小猫在说话"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> * m_Name;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Animal *animal = <span class="keyword">new</span> Cat(<span class="string">"Tom"</span>);</span><br><span class="line">    animal-&gt;speak();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">delete</span> animal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    test();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="向上类型转换和向下类型转换"><a href="#向上类型转换和向下类型转换" class="headerlink" title="向上类型转换和向下类型转换"></a><strong>向上类型转换和向下类型转换</strong></h2><p>向上类型转换：基类转派生类，不安全的</p>
<p>向下类型转换：派生类转基类，安全的</p>
<p>如果发生多态，总是安全的</p>
<h2 id="多态案例-–文字PK游戏"><a href="#多态案例-–文字PK游戏" class="headerlink" title="多态案例 –文字PK游戏"></a><strong>多态案例 –文字PK游戏</strong></h2><h4 id="main-cpp"><a href="#main-cpp" class="headerlink" title="main.cpp"></a><strong>main.cpp</strong></h4><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ctime&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Weapon.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Hero.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Monster.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Knife.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DragonSword.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">play</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//创建怪物</span></span><br><span class="line">    Monster *monster = <span class="keyword">new</span> Monster;</span><br><span class="line">    <span class="comment">//创建英雄</span></span><br><span class="line">    Hero *hero = <span class="keyword">new</span> Hero;</span><br><span class="line">    <span class="comment">//创建武器</span></span><br><span class="line">    Weapon *knife = <span class="keyword">new</span> Knife;</span><br><span class="line">    Weapon *dragon = <span class="keyword">new</span> DragonSword;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">//选择武器</span></span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"请选择武器"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"1. 赤手空拳"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"2. 小刀"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"3. 屠龙宝刀"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> oper;</span><br><span class="line">    <span class="built_in">cin</span>&gt;&gt;oper;</span><br><span class="line">    <span class="keyword">switch</span> (oper)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"你真牛X!"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        hero-&gt;EquipWeapon(knife);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">        hero-&gt;EquipWeapon(dragon);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    getchar();</span><br><span class="line">    <span class="keyword">int</span> round = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        getchar();</span><br><span class="line">        <span class="comment">//system("cls");</span></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"------当前第"</span>&lt;&lt;round&lt;&lt;<span class="string">"回合开始------"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">if</span>(hero-&gt;m_Hp &lt;= <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄"</span>&lt;&lt;hero-&gt;m_Name&lt;&lt;<span class="string">"已经死了，游戏结束"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        hero-&gt;Attack(monster);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(monster-&gt;m_Hp &lt;= <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"怪物"</span>&lt;&lt;monster-&gt;m_Name&lt;&lt;<span class="string">"已经死了，游戏通关"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        monster-&gt;Attack(hero);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(hero-&gt;m_Hp &lt;= <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄"</span>&lt;&lt;hero-&gt;m_Name&lt;&lt;<span class="string">"已经死了，游戏结束"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄"</span>&lt;&lt;hero-&gt;m_Name&lt;&lt;<span class="string">"剩余血量: "</span>&lt;&lt;hero-&gt;m_Hp&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"怪物"</span>&lt;&lt;monster-&gt;m_Name&lt;&lt;<span class="string">"剩余血量: "</span>&lt;&lt;monster-&gt;m_Hp&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">        round ++;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">delete</span> monster;</span><br><span class="line">    <span class="keyword">delete</span> hero;</span><br><span class="line">    <span class="keyword">delete</span> knife;</span><br><span class="line">    <span class="keyword">delete</span> dragon;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    srand((<span class="keyword">unsigned</span> <span class="keyword">int</span>)time(<span class="literal">NULL</span>));</span><br><span class="line">    play();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="hero-h"><a href="#hero-h" class="headerlink" title="hero.h"></a><strong>hero.h</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Weapon.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Monster.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Hero();</span><br><span class="line">    <span class="built_in">string</span> m_Name;</span><br><span class="line">    <span class="keyword">int</span> m_Atk;</span><br><span class="line">    <span class="keyword">int</span> m_Def;</span><br><span class="line">    <span class="keyword">int</span> m_Hp;</span><br><span class="line">    Weapon *weapon;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">EquipWeapon</span><span class="params">(Weapon *weapon)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Attack</span><span class="params">(Monster *monster)</span></span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="dragonsword-h"><a href="#dragonsword-h" class="headerlink" title="dragonsword.h"></a><strong>dragonsword.h</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Weapon.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DragonSword</span>:</span> <span class="keyword">public</span> Weapon</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    DragonSword();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取基础伤害</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getBaseDamage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取吸血</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getSuckBlood</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取是否定身</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">getHold</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//获取是否暴击</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">getCirt</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//吸血率 定身率 暴击率</span></span><br><span class="line">    <span class="keyword">int</span> suckRate;</span><br><span class="line">    <span class="keyword">int</span> holdRate;</span><br><span class="line">    <span class="keyword">int</span> cirtRate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//传入概率 判断是否触发</span></span><br><span class="line">    <span class="function"><span class="keyword">bool</span> <span class="title">isTrigger</span><span class="params">(<span class="keyword">int</span> rate)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="knife-h"><a href="#knife-h" class="headerlink" title="knife.h"></a><strong>knife.h</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Weapon.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Knife</span>:</span> <span class="keyword">public</span> Weapon</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Knife();</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取基础伤害</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getBaseDamage</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取吸血</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getSuckBlood</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取是否定身</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">getHold</span><span class="params">()</span></span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//获取是否暴击</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">getCirt</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="weapon-h"><a href="#weapon-h" class="headerlink" title="weapon.h"></a><strong>weapon.h</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽象类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Weapon</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="comment">//获取基础伤害</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getBaseDamage</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//获取吸血</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">int</span> <span class="title">getSuckBlood</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//获取是否定身</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">getHold</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    <span class="comment">//获取是否暴击</span></span><br><span class="line">    <span class="function"><span class="keyword">virtual</span> <span class="keyword">bool</span> <span class="title">getCirt</span><span class="params">()</span> </span>= <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">string</span> m_WeaponName;</span><br><span class="line">    <span class="keyword">int</span> m_BaseDamage;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="monster-h"><a href="#monster-h" class="headerlink" title="monster.h"></a><strong>monster.h</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> once</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Weapon.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Hero.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Hero</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Monster</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    Monster();</span><br><span class="line">    <span class="built_in">string</span> m_Name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> m_Hp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> m_Atk;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> m_Def;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">bool</span> m_Hold;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">Attack</span><span class="params">(Hero *hero)</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h4 id="dragonsword-cpp"><a href="#dragonsword-cpp" class="headerlink" title="dragonsword.cpp"></a><strong>dragonsword.cpp</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"DragonSword.h"</span></span></span><br><span class="line"></span><br><span class="line">DragonSword::DragonSword()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_BaseDamage = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_WeaponName = <span class="string">"屠龙宝刀"</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;suckRate = <span class="number">20</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;holdRate = <span class="number">30</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;cirtRate = <span class="number">35</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取基础伤害</span></span><br><span class="line"><span class="keyword">int</span> DragonSword::getBaseDamage()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_BaseDamage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取吸血</span></span><br><span class="line"><span class="keyword">int</span> DragonSword::getSuckBlood()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(isTrigger(suckRate))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_BaseDamage*<span class="number">0.5</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取是否定身</span></span><br><span class="line"><span class="keyword">bool</span> DragonSword::getHold()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(isTrigger(holdRate))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取是否暴击</span></span><br><span class="line"><span class="keyword">bool</span> DragonSword::getCirt()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(isTrigger(cirtRate))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> DragonSword::isTrigger(<span class="keyword">int</span> rate)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//随机1-100的数字</span></span><br><span class="line">    <span class="keyword">int</span> num = rand()%<span class="number">100</span>+<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(num &lt; rate)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="hero-cpp"><a href="#hero-cpp" class="headerlink" title="hero.cpp"></a><strong>hero.cpp</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Hero.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Hero::Hero()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Hp = <span class="number">500</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Atk = <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Def = <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Name = <span class="string">"帅小景"</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;weapon =<span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Hero::EquipWeapon(Weapon *weapon)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;weapon = weapon;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄: "</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">"装备了武器："</span>&lt;&lt;<span class="keyword">this</span>-&gt;weapon-&gt;m_WeaponName&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Hero::Attack(Monster *monster)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">int</span> damage = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> addHp = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">bool</span> isHold = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">bool</span> isCrit = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>-&gt;weapon == <span class="literal">NULL</span>)<span class="comment">//空武器</span></span><br><span class="line">    &#123;</span><br><span class="line">        damage = <span class="keyword">this</span>-&gt;m_Atk;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">//基础伤害</span></span><br><span class="line">       damage = <span class="keyword">this</span>-&gt;m_Atk + <span class="keyword">this</span>-&gt;weapon-&gt;getBaseDamage();</span><br><span class="line">       <span class="comment">//计算吸血</span></span><br><span class="line">       addHp = <span class="keyword">this</span>-&gt;weapon-&gt;getSuckBlood();</span><br><span class="line">       <span class="comment">//计算定身</span></span><br><span class="line">       isHold = <span class="keyword">this</span>-&gt;weapon-&gt;getHold();</span><br><span class="line">       <span class="comment">//计算暴击</span></span><br><span class="line">       isCrit = <span class="keyword">this</span>-&gt;weapon-&gt;getCirt();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(isCrit)</span><br><span class="line">    &#123;</span><br><span class="line">        damage = damage*<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄的武器触发了暴击效果，怪物收到了双倍伤害，伤害值: "</span>&lt;&lt;damage&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(isHold)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄的武器触发了定身效果，怪物停止攻击一回合"</span>&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(addHp &gt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄的武器触发了吸血效果，英雄增加的血量为: "</span>&lt;&lt;addHp&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//掉怪物血量</span></span><br><span class="line">    monster-&gt;m_Hold = isHold;</span><br><span class="line">    <span class="comment">//计算真实伤害</span></span><br><span class="line">    <span class="keyword">int</span> trueDamage = (damage - monster-&gt;m_Def) &gt; <span class="number">0</span> ? damage - monster-&gt;m_Def:<span class="number">1</span>;</span><br><span class="line">    monster-&gt;m_Hp -= trueDamage;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Hp += addHp;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"英雄"</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">"攻击了敌人 "</span>&lt;&lt;monster-&gt;m_Name&lt;&lt;<span class="string">"造成了伤害: "</span>&lt;&lt;trueDamage&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="knife-cpp"><a href="#knife-cpp" class="headerlink" title="knife.cpp"></a><strong>knife.cpp</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Knife.h"</span></span></span><br><span class="line"></span><br><span class="line">Knife::Knife()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_BaseDamage = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_WeaponName = <span class="string">"小刀"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//获取基础伤害</span></span><br><span class="line"><span class="keyword">int</span> Knife::getBaseDamage()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>-&gt;m_BaseDamage;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取吸血</span></span><br><span class="line"><span class="keyword">int</span> Knife::getSuckBlood()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取是否定身</span></span><br><span class="line"><span class="keyword">bool</span> Knife::getHold()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取是否暴击</span></span><br><span class="line"><span class="keyword">bool</span> Knife::getCirt()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="monster-cpp"><a href="#monster-cpp" class="headerlink" title="monster.cpp"></a><strong>monster.cpp</strong></h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Monster.h"</span></span></span><br><span class="line"></span><br><span class="line">Monster::Monster()</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Hp = <span class="number">300</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Atk = <span class="number">70</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Def = <span class="number">40</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Hold = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">this</span>-&gt;m_Name = <span class="string">"大敢王"</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> Monster::Attack(Hero *hero)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">this</span>-&gt;m_Hold)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span>&lt;&lt;<span class="string">"怪物"</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">"被定身了，本回合无法攻击"</span>;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span> damage = (<span class="keyword">this</span>-&gt;m_Atk - hero-&gt;m_Def) &gt; <span class="number">0</span> ? <span class="keyword">this</span>-&gt;m_Atk - hero-&gt;m_Def : <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    hero-&gt;m_Hp -= damage;</span><br><span class="line">    <span class="built_in">cout</span>&lt;&lt;<span class="string">"怪物"</span>&lt;&lt;<span class="keyword">this</span>-&gt;m_Name&lt;&lt;<span class="string">"攻击了英雄"</span>&lt;&lt;hero-&gt;m_Name&lt;&lt;<span class="string">"造成了伤害: "</span>&lt;&lt;damage&lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        </div>
        
<blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2019-10-16T10:56:39.690Z" itemprop="dateUpdated">2019-10-16 18:56:39</time>
</span><br>


        
        转载注明出处，原文地址：<a href="/2019/10/11/C-基础07/" target="_blank" rel="external">www.huangshurong.top/2019/10/11/C-基础07/</a>
        
    </div>
    <footer>
        <a href="www.huangshurong.top">
            <img src="/img/yong.png" alt="HSR">
            HSR
        </a>
    </footer>
</blockquote>

        
        <div class="post-footer">
            
            <div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=www.huangshurong.top/2019/10/11/C-基础07/&title=《C++基础07》 — 庸的博客&pic=www.huangshurong.top/img/yong.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=www.huangshurong.top/2019/10/11/C-基础07/&title=《C++基础07》 — 庸的博客&source=这是一个菜鸡的博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>

        </div>
        
            


        
    </div>
    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="prev">
      <a href="/2019/10/16/C-基础08/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">C++基础08</h4>
      </a>
    </div>
  

  
    <div class="next">
      <a href="/2019/10/08/C-基础06/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">C++基础06</h4>
      </a>
    </div>
  
</nav>


    
    
        <aside class="post-widget">
            <nav class="post-toc-wrap" id="post-toc">
                <strong>目录</strong>
                <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#静态联编和动态联编"><span class="post-toc-number">1.</span> <span class="post-toc-text">静态联编和动态联编</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多态原理解析"><span class="post-toc-number">2.</span> <span class="post-toc-text">多态原理解析</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多态案例–计算器案例"><span class="post-toc-number">3.</span> <span class="post-toc-text">多态案例–计算器案例</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#抽象类和纯虚函数"><span class="post-toc-number">4.</span> <span class="post-toc-text">抽象类和纯虚函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#虚析构和纯析构函数"><span class="post-toc-number">5.</span> <span class="post-toc-text">虚析构和纯析构函数</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#向上类型转换和向下类型转换"><span class="post-toc-number">6.</span> <span class="post-toc-text">向上类型转换和向下类型转换</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多态案例-–文字PK游戏"><span class="post-toc-number">7.</span> <span class="post-toc-text">多态案例 –文字PK游戏</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#main-cpp"><span class="post-toc-number">7.0.1.</span> <span class="post-toc-text">main.cpp</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#hero-h"><span class="post-toc-number">7.0.2.</span> <span class="post-toc-text">hero.h</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#dragonsword-h"><span class="post-toc-number">7.0.3.</span> <span class="post-toc-text">dragonsword.h</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#knife-h"><span class="post-toc-number">7.0.4.</span> <span class="post-toc-text">knife.h</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#weapon-h"><span class="post-toc-number">7.0.5.</span> <span class="post-toc-text">weapon.h</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#monster-h"><span class="post-toc-number">7.0.6.</span> <span class="post-toc-text">monster.h</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#dragonsword-cpp"><span class="post-toc-number">7.0.7.</span> <span class="post-toc-text">dragonsword.cpp</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#hero-cpp"><span class="post-toc-number">7.0.8.</span> <span class="post-toc-text">hero.cpp</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#knife-cpp"><span class="post-toc-number">7.0.9.</span> <span class="post-toc-text">knife.cpp</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#monster-cpp"><span class="post-toc-number">7.0.10.</span> <span class="post-toc-text">monster.cpp</span></a></li></ol></li></ol></li></ol>
            </nav>
            <div class="toc-bar"><div>
        </aside>
    
</article>


</div>

    </main>
    <footer class="footer ">
    
    <div class="top">
        
            <p>
    <span>Links：</span>
    
    <span class="blogroll-item">
        <a href="https://www.huangshurong.top" target="_blank">HOME</a>
    </span>
    
</p>

        
    </div>
    
    <div class="bottom">
        <p>
            <span>
                HSR &copy; 2017 - 2019
            </span>
        		
           	
            
            
            <span>
	            Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/codefine/hexo-theme-mellow" target="_blank">mellow</a>
            </span>
            
            
            

            
                
<span class="site-uv" title="总访客量">
    <i class="icon icon-user"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_uv"></i>
</span>


<span class="site-pv" title="总访问量">
    <i class="icon icon-eye"></i>
    <i class="busuanzi-value" id="busuanzi_value_site_pv"></i>
</span>

            
        </p>
    </div>
</footer>

    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=www.huangshurong.top/2019/10/11/C-基础07/&title=《C++基础07》 — 庸的博客&pic=www.huangshurong.top/img/yong.png" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=www.huangshurong.top/2019/10/11/C-基础07/&title=《C++基础07》 — 庸的博客&source=这是一个菜鸡的博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACMklEQVR42u3aMY7DMAwF0dz/0t42QFb28NMuTI0qIwkiPRcESfHzwev4WqvPv789Fuv729Xz7y63LRkyZLyWcZwufqxz6u/z6uhk33+oMmTI2ICximDn21ePwiMnP5sMGTJkVJ9JcKy+AhkyZMjoMEhI5aXs+W9kyJAhI2uQlUtNzH6wFpchQ8YLGZ3C8unnR+43ZMiQ8SrGUVzVVK96rCNaMmTImM3g2/C0rJMa8rRPhgwZ+zD46AMvO7MRCrL7ckcZMmSMZmQYcqnAG2c8Kbx4rTJkyBjKqI5BdBpw2XFR8ipDhowNGHy4gW+clbU8iC+7hjJkyBjNqB6iOipRfR28YJYhQ8YOjE5rnrf7yXNYJMuQIWM0o1pqZoUuCcHZ7wvvVYYMGYMYWcFZLUF5s6/QVZMhQ8ZQBhnPyi4PzkN2VvRejIXJkCFjNIMXsVmamIXRwtWmDBkyNmDwdK16VUACLh8guyhfZciQMZrBrwRIqH0iBF+cUIYMGaMZ/YsBsnjYRaMV2Z2qDBkyRjA6YZGsztVmYdhChgwZoxmduYVs5KsaXsPUUIYMGYMYGSZLHwutNA6WIUPGUMa96d1d1wblfWXIkDGa0W+Z8VDbGRS7K0zLkCHjvQwSZLPRrmwuIiubZciQsQOjGviqJB5kw9JXhgwZMnCjP7v4zMIxehMyZMjYmMGbX1ngLodvGTJkbMAgoZC07El45Q01/j8yZMiYzagON/SvLZ9LPWXIkDGO8QdEmvAuAQYiAQAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>


    
    <!-- main-js -->
<script type="text/javascript" src="//cdn.bootcss.com/jquery/2.1.0/jquery.min.js"></script>
<script type="text/javascript" src="/js/plugins/fastclick.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/plugins/ios-orientationchange-fix.js?v=1.4.4"></script>
<script type="text/javascript" src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.2/dist/jquery.fancybox.min.js"></script>

<script type="text/javascript" src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>

<script type="text/javascript" src="/js/method.js?v=1.4.4"></script>
<script type="text/javascript" src="/js/blog.js?v=1.4.4"></script>

<!-- third-party -->






<script type="text/javascript" src="/js/plugins/local_search.js?v=1.4.4"></script>
<script type="text/javascript">
	var search_path = "search.xml";
	if (search_path.length === 0) {
		search_path = "search.xml";
	}
	var path = "/" + search_path;
	searchFunc(path, "local-search-input", "local-search-result");
</script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    
    





    <!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
            processEscapes: true,
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.bootcss.com/mathjax/2.7.1/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>







    
</body>
</html>
